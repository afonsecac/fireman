<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://java.sun.com/jsf/core">

<p:dialog header="Crear Local" widgetVar="dlgCreate" modal="true">
	<h:form id="formUserCreate" prependId="false">
		<p:outputPanel id="opCreate">
			<p:panelGrid columns="1" cellpadding="5" layout="grid"
				styleClass="ui-noborder">

                <h:panelGroup>
                    <p:outputLabel for="txtName" value="Nombre del local"/>
                    <div>
                        <p:inputText id="txtName"
                                value="#{clientLocalBean.selectedLocal.name}" required="true"
                                requiredMessage="Dirección requerida"/>
                        <p:message for="txtAddress"/>
                    </div>
                </h:panelGroup>

                <h:panelGroup>
					<p:outputLabel for="txtAddress" value="Dirección" />
					<div>
						<p:inputText id="txtAddress"
							value="#{clientLocalBean.selectedLocal.address}" required="true"
							requiredMessage="Dirección requerida" />
						<p:message for="txtAddress" />
					</div>
				</h:panelGroup>

				<h:panelGroup>
					<p:outputLabel for="cmbService" value="Servicio" />
					<div>
						<p:selectOneMenu id="cmbService"
							value="#{clientLocalBean.service}"
							converter="selectOneMenuConverter" panelStyle="width:180px"
							effect="fade" var="s" style="width:230px" filter="true"
							filterMatchMode="startsWith">
							<f:selectItems value="#{clientLocalBean.listServices()}"
								var="serv" itemLabel="#{serv.name}" itemValue="#{serv}" />
							<p:column>
								<h:outputText value="#{s.name}" />
							</p:column>
						</p:selectOneMenu>
						<p:message for="cmbService" />
					</div>
				</h:panelGroup>
			</p:panelGrid>
		</p:outputPanel>

		<div align="right" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update=":formList:dtList growl"
				oncomplete="handleDialogSubmit(xhr, status, args, PF('dlgCreate'))"
				actionListener="#{clientLocalBean.createLocal()}" value="Guardar"
				styleClass="btn btn-default" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Editar Local" widgetVar="dlgEdit" modal="true">
	<h:form id="formEdit">
		<p:outputPanel id="opEdit">
			<p:panelGrid columns="1" cellpadding="5" layout="grid"
				styleClass="ui-noborder">

                <h:panelGroup>
                    <p:outputLabel for="txtName2" value="Nombre del local"/>
                    <div>
                        <p:inputText id="txtName2"
                                value="#{clientLocalBean.selectedLocal.name}" required="true"
                                requiredMessage="Dirección requerida"/>
                        <p:message for="txtAddress2"/>
                    </div>
                </h:panelGroup>

				<h:panelGroup>
					<p:outputLabel for="txtAddress2" value="Dirección" />
					<div>
						<p:inputText id="txtAddress2"
							value="#{clientLocalBean.selectedLocal.address}" required="true"
							requiredMessage="Dirección requerida" />
						<p:message for="txtAddress2" />
					</div>
				</h:panelGroup>

				<h:panelGroup>
					<p:outputLabel for="cmbService2" value="Servicio" />
					<div>
						<p:selectOneMenu id="cmbService2"
							value="#{clientLocalBean.selectedLocal.service}"
							converter="selectOneMenuConverter" panelStyle="width:180px"
							effect="fade" var="s" style="width:230px" filter="true"
							filterMatchMode="startsWith">
							<f:selectItems value="#{clientLocalBean.listServices()}"
								var="serv" itemLabel="#{serv.name}" itemValue="#{serv}" />
							<p:column>
								<h:outputText value="#{s.name}" />
							</p:column>
						</p:selectOneMenu>
						<p:message for="cmbService2" />
					</div>
				</h:panelGroup>
			</p:panelGrid>
		</p:outputPanel>

		<div align="right" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				oncomplete="handleDialogSubmit(xhr, status, args, PF('dlgEdit'))"
				update=":formList:dtList growl opEdit"
				actionListener="#{clientLocalBean.editLocal()}" value="Guardar"
				styleClass="btn btn-default" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Eliminar Local" widgetVar="dlgEliminar" width="255"
	resizable="false" modal="true">
	<h:form id="formDelete">
		<p:outputPanel id="opDelete" style="text-align: center;">
			<h:outputText
				value="Está seguro que desea eliminar este registro?. Si selecciona SI, perderá todos los datos." />
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgEliminar').hide();"
				actionListener="#{clientLocalBean.deleteLocal()}" value="SI"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgEliminar').hide();"
				actionListener="#{clientLocalBean.clearData()}" value="NO"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Solicitar Permiso" widgetVar="dlgRequest" width="255"
	resizable="false" modal="true">
	<h:form id="formRequest">
		<p:outputPanel id="opRequest" style="text-align: center;">
			<h:outputText
				value="Está seguro que desea solicitar el permiso de funcionamiento?." />
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgRequest').hide();"
				actionListener="#{clientLocalBean.localRequest()}" value="SI"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgRequest').hide();"
				actionListener="#{clientLocalBean.clearData()}" value="NO"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Cancelar Solicitud" widgetVar="dlgCancel" width="255"
	resizable="false" modal="true">
	<h:form id="formCancel">
		<p:outputPanel id="opCancel" style="text-align: center;">
			<h:outputText
				value="Está seguro que desea cancelar la solicitud del permiso de funcionamiento?." />
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList" oncomplete="PF('dlgCancel').hide();"
				actionListener="#{clientLocalBean.cancelRequest()}" value="SI"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList" oncomplete="PF('dlgCancel').hide();"
				actionListener="#{clientLocalBean.clearData()}" value="NO"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Cargar Documentos" widgetVar="dlgFiles" width="600"
	modal="true">
	<h:form id="formFiles" enctype="multipart/form-data">
		<p:outputPanel id="opFiles">

			<p:repeat value="#{clientLocalBean.listRequirements()}" var="item">
				<p:panelGrid columns="2" cellpadding="5" layout="grid">
					<h:outputText value="#{item.requirementName}" />
					<p:fileUpload value="#{item.file}" mode="simple" skinSimple="true"
						label="Seleccionar" />
				</p:panelGrid>
			</p:repeat>

		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="false" action="faces-redirect=false"
				update="growl :formList:dtList" oncomplete="PF('dlgFiles').hide();"
				actionListener="#{clientLocalBean.upload()}"
				value="Guardar Documentos" style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

</html>
